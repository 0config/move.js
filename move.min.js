/*!
 * move
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */(function(a){function c(){this.callbacks={}}var b=getComputedStyle||currentStyle;c.prototype.on=function(a,b){(this.callbacks[a]=this.callbacks[a]||[]).push(b);return this},c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=this.callbacks[a],d;if(c){d=c.length;for(var e=0;e<d;++e)c[e].apply(this,b)}return this},a.move=function(a){return new d(move.select(a))},move.defaults={duration:500},move.ease={"in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"},move.select=function(a){return document.getElementById(a)||document.querySelectorAll(a)[0]},a.Move=function d(a){if(!(this instanceof d))return new d(a);c.call(this),this.el=a,this._props={},this._rotate=0,this._transitionProps=[],this._transforms=[],this.duration(move.defaults.duration)},d.prototype=new c,d.prototype.constructor=d,d.prototype.transform=function(a){this._transforms.push(a);return this},d.prototype.skew=function(a,b){b=b||0;return this.transform("skew("+a+"deg, "+b+"deg)")},d.prototype.skewX=function(a){return this.transform("skewX("+a+"deg)")},d.prototype.skewY=function(a){return this.transform("skewY("+a+"deg)")},d.prototype.translate=d.prototype.to=function(a,b){b=b||0;return this.transform("translate("+a+"px, "+b+"px)")},d.prototype.translateX=d.prototype.x=function(a){return this.transform("translateX("+a+"px)")},d.prototype.translateY=d.prototype.y=function(a){return this.transform("translateY("+a+"px)")},d.prototype.scale=function(a,b){b=null==b?a:b;return this.transform("scale("+a+", "+b+")")},d.prototype.scaleX=function(a){return this.transform("scaleX("+a+")")},d.prototype.scaleY=function(a){return this.transform("scaleY("+a+")")},d.prototype.rotate=function(a){return this.transform("rotate("+a+"deg)")},d.prototype.ease=function(a){a=move.ease[a]||a||"ease";return this.setVendorProperty("transition-timing-function",a)},d.prototype.duration=function(a){this._duration=a;return this.setVendorProperty("transition-duration",a)},d.prototype.delay=function(a){return this.setVendorProperty("transition-delay",a)},d.prototype.setProperty=function(a,b){this._props[a]=b;return this},d.prototype.setVendorProperty=function(a,b){this.setProperty("-webkit-"+a,b),this.setProperty("-moz-"+a,b),this.setProperty("-ms-"+a,b),this.setProperty("-o-"+a,b);return this},d.prototype.set=function(a,b){this.transition(a),this._props[a]=b;return this},d.prototype.add=function(a,b){var c=parseInt(this.current(a),10);return this.set(a,c+b)},d.prototype.sub=function(a,b){var c=parseInt(this.current(a),10);return this.set(a,c-b)},d.prototype.current=function(a){return b(this.el).getPropertyValue(a)},d.prototype.transition=function(a){if(!this._transitionProps.indexOf(a))return this;this._transitionProps.push(a);return this},d.prototype.applyProperties=function(){var a=this._props,b=this.el;for(var c in a)a.hasOwnProperty(c)&&b.style.setProperty(c,a[c]);return this},d.prototype.move=d.prototype.select=function(a){this.el=move.select(a);return this},d.prototype.then=function(a){if(a instanceof d)this.on("end",function(){a.end()});else if("function"==typeof a)this.on("end",a);else{var b=new d(this.el);b._transforms=this._transforms.slice(0),this.then(b),b.parent=this;return b}return this},d.prototype.pop=function(){return this.parent},d.prototype.end=function(a){var b=this;this._transforms.length&&this.setVendorProperty("transform",this._transforms.join(" ")),this.setVendorProperty("transition-properties",this._transitionProps.join(", ")),this.applyProperties(),a&&this.then(a),setTimeout(function(){b.emit("end")},this._duration);return this}})(this)